---
import Image from 'astro/components/Image.astro'
import type { CollectionEntry } from 'astro:content'
import { translation } from '../i18n/translations'
interface Props {
  project: CollectionEntry<'projects'>
}
const { project } = Astro.props
const images = import.meta.glob<{ string: ImageMetadata }>('/src/img/*.{jpg,png}')
const coverImageSrc = Object.keys(images).find(key => key.includes(`${project.data.imageKey}_cover`)) as string
const currentLang = (Astro.currentLocale as 'ru' | 'en') || 'en'
---

<section id={project.id} class='flex flex-col gap-4 md:grid grid-cols-[35%_1fr] md:gap-6'>
  <div class=''>
    <Image src={images[coverImageSrc]()} alt='' class='w-fit object-cover h-full' />
  </div>
  <div class='flex flex-col gap-6 justify-between md:-order-1'>
    <div class='flex flex-col'>
      <p class='text-blue-600 text-sm mb-2'>{project.data.techStack.join(' â€¢ ')}</p>
      <h3 class='text-xl transition duration-300 mb-3'>
        {project.data.title}
      </h3>
      <ul class='flex flex-col gap-1 list-disc pl-4'>
        {project.data.keyFeatures?.map(feature => <li class='text-gray-700'>{feature}</li>)}
      </ul>
    </div>
    <div class='flex w-max h-min'>
      {
        project.data.siteLink ? (
          <a
            href={project.data.siteLink}
            rel='nofollow'
            target='_blank'
            class='text-center px-4 py-2 bg-blue-600 hover:bg-blue-500 transition text-white rounded  min-w-48'>
            {translation[currentLang].projectCard.link}
          </a>
        ) : (
          <p class='bg-gray-200 text-gray-800 px-4 py-2 rounded min-w-48'>
            {translation[currentLang].projectCard.inDevelopment}
          </p>
        )
      }
    </div>
  </div>
</section>
